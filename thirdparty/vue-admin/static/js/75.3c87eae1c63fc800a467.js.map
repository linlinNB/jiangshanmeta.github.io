{"version":3,"sources":["webpack:///./src/components/common/editor/_computed_value_label_map_mixin.js","webpack:///./node_modules/babel-runtime/core-js/object/values.js","webpack:///./node_modules/core-js/library/modules/es7.map.of.js","webpack:///./src/components/common/editor/_props_label_value_mixin.js","webpack:///./src/components/common/editor/_props_value_mixin.js","webpack:///./node_modules/core-js/library/modules/_object-to-array.js","webpack:///./src/components/common/editor/_validate_option.js","webpack:///./src/components/common/editor/_field_relates_mixin.js","webpack:///./node_modules/babel-runtime/core-js/map.js","webpack:///./src/components/common/editor/filter_relates_model.vue?4ca5","webpack:///./src/components/common/editor/filter_relates_model.vue?b8fe","webpack:///src/components/common/editor/filter_relates_model.vue","webpack:///./src/components/common/editor/filter_relates_model.vue","webpack:///./node_modules/core-js/library/fn/map.js","webpack:///./node_modules/core-js/library/modules/es7.map.to-json.js","webpack:///./src/components/common/editor/_filter_all_mixin.js","webpack:///./node_modules/core-js/library/modules/es7.map.from.js","webpack:///./src/components/common/editor/_computed_model_mixin.js","webpack:///./node_modules/core-js/library/modules/es7.object.values.js","webpack:///./node_modules/core-js/library/modules/es6.map.js","webpack:///./node_modules/babel-runtime/helpers/toArray.js","webpack:///./src/components/common/editor/_validate_option_mono.js","webpack:///./node_modules/core-js/library/fn/object/values.js","webpack:///./src/components/common/editor/field_model.vue?df9f","webpack:///./src/components/common/editor/field_model.vue?f73a","webpack:///src/components/common/editor/field_model.vue","webpack:///./src/components/common/editor/field_model.vue","webpack:///./src/components/common/editor/filter_model.vue?fe8b","webpack:///./src/components/common/editor/filter_model.vue?b7f2","webpack:///src/components/common/editor/filter_model.vue","webpack:///./src/components/common/editor/filter_model.vue"],"names":["__webpack_exports__","computed","valueLabelMap","valuefield","this","labelfield","candidate","reduce","map","item","set","babel_runtime_core_js_map__WEBPACK_IMPORTED_MODULE_0___default","a","module","exports","default","__webpack_require__","__esModule","props","type","String","value","required","getKeys","toIObject","isEnum","f","isEntries","it","key","O","keys","length","i","result","call","push","clearInvalidData","valueArr","optionArr","babel_runtime_core_js_set__WEBPACK_IMPORTED_MODULE_2___default","resultSet","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","babel_runtime_core_js_get_iterator__WEBPACK_IMPORTED_MODULE_1___default","next","done","has","add","err","return","concat","babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","isCandidateValid","Boolean","handleInvalidValue","Function","watch","handler","immediate","methods","_gen_allvalue_set","allvalueSet","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","relates","Array","httpRequest","handleInvalidRelateIds","getOptions","_this","hasValidIds","hasCachedOptions","queryObj","cacheObj","forEach","queryKey","hasOwnProperty","requestField","relateField","babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_2___default","resolve","reject","then","setCacheOptions","catch","_widget_utility__WEBPACK_IMPORTED_MODULE_3__","options","start","optionsCache","len","counter","cacheKey","$set","finalOptions","allOptions","level","levelTree","arr","child","babel_runtime_core_js_object_values__WEBPACK_IMPORTED_MODULE_1___default","rst","obj","babel_runtime_core_js_get_iterator__WEBPACK_IMPORTED_MODULE_0___default","invalidValue","relateId","data","deep","editor_filter_relates_modelvue_type_script_lang_js","name","inheritAttrs","components","filter_model","mixins","_field_relates_mixin","_props_value_mixin","_computed_model_mixin","component","Object","componentNormalizer","_vm","_h","$createElement","_self","_c","_b","attrs","model","callback","$$v","expression","$attrs","Map","$export","P","R","toJSON","allvalue","alllabel","filter_candidate","_arr$unshift","babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_1___default","slice","unshift","babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default","get","val","$emit","$values","S","values","strong","validate","arguments","entry","getEntry","v","def","_from","_from2","isArray","babel_runtime_core_js_object_assign__WEBPACK_IMPORTED_MODULE_3___default","_validate_option__WEBPACK_IMPORTED_MODULE_4__","validateOption","babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default","editor_field_modelvue_type_script_lang_js","_props_label_value_mixin","_computed_value_label_map_mixin","_validate_option_mono","showValue","queryModel","queryString","cb","filter","includes","handleInput","handleSelect","setShowValueByValue","value-key","fetch-suggestions","on","select","input","editor_filter_modelvue_type_script_lang_js","field_model","_filter_all_mixin"],"mappings":"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","file":"static/js/75.3c87eae1c63fc800a467.js","sourcesContent":["export default{\n    computed:{\n        valueLabelMap(){\n            let valuefield = this.valuefield;\n            let labelfield = this.labelfield;\n            return this.candidate.reduce((map,item)=>{\n                map.set(item[valuefield],item[labelfield]);\n                return map;\n            },new Map());\n        },\n    },\n}","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","export default{\n    props:{\n        labelfield:{\n            type:String,\n            default:'label',\n        },\n        valuefield:{\n            type:String,\n            default:'value',\n        }\n    }\n}","export default{\n    props:{\n        value:{\n            required:true,\n        }\n    }\n}","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n","function noop(){}\n\nexport default{\n    props:{\n        isCandidateValid:{\n            type:Boolean,\n            default:true,\n        },\n        handleInvalidValue:{\n            type:Function,\n            default:noop,\n        },\n    },\n    watch:{\n        value:{\n            handler:\"validateOption\",\n            immediate:true,\n        },\n        candidate:{\n            handler:\"validateOption\",\n            immediate:true,\n        },\n    },\n    methods:{\n        _gen_allvalue_set(){\n            let allvalueSet = new Set();\n            for(let item of this.candidate){\n                allvalueSet.add(item[this.valuefield]);\n            }\n            return allvalueSet;\n        },\n    },\n}\n\n// 去重的方法\nexport function unique(valueArr){\n    return [...new Set(valueArr)];\n}\n\n// 清除不在候选项的选择的数据\nexport function clearInvalidData(valueArr,optionArr){\n    let set = new Set(optionArr);\n    let resultSet = new Set();\n    for(let item of valueArr){\n        if(set.has(item)){\n            resultSet.add(item);\n        }\n    }\n    return [...resultSet];\n}","import {logError} from \"@/widget/utility\"\n\nfunction noop(){}\n\nexport default{\n    props:{\n        relates:{\n            type:Array,\n            default:function(){\n                return []\n            }\n        },\n        httpRequest:{\n            type:Function,\n            required:true,\n        },\n        labelfield:{\n            type:String,\n            default:'label',\n        },\n        valuefield:{\n            type:String,\n            default:'value',\n        },\n        handleInvalidRelateIds:{\n            type:Function,\n            default:noop,\n        },\n        \n    },\n    methods:{\n        getOptions(){\n            if(!this.hasValidIds){\n                this.handleInvalidRelateIds();\n                return;\n            }\n\n            if(this.hasCachedOptions){\n                return;\n            }\n\n            let queryObj = {};\n            let cacheObj = {};\n\n            this.relates.forEach((item)=>{\n                let queryKey = item.hasOwnProperty(\"requestField\")?item.requestField:item.relateField;\n                queryObj[queryKey] = item.value;\n                cacheObj[item.relateField] = item.value;\n            });\n\n            new Promise((resolve,reject)=>{\n                this.httpRequest(resolve,queryObj)\n            }).then((candidate)=>{\n                this.setCacheOptions(candidate,cacheObj)\n            }).catch(logError);\n\n        },\n        setCacheOptions(options,cacheObj){\n            let start = this.optionsCache;\n            let len = this.relates.length;\n            let counter = 0;\n            while(counter<len-1){\n                let cacheKey = cacheObj[this.relates[counter++].relateField];\n                if(!start.hasOwnProperty(cacheKey)){\n                    this.$set(start,cacheKey,{});\n                }\n                start = start[cacheKey];\n            }\n            this.$set(start,this.relates[len-1]['value'],options);\n        },\n    },\n    computed:{\n        finalOptions(){\n            if(!this.hasValidIds || !this.hasCachedOptions){\n                return [];\n            }\n            let length = this.relates.length;\n            let counter = 0;\n            let start = this.optionsCache;\n            while(counter<length){\n                start = start[this.relates[counter++]['value'] ];\n            }\n            return start;\n        },\n        allOptions(){\n            let level = this.relates.length;\n            let counter = 0;\n\n            let levelTree = [];\n            levelTree[0] = [this.optionsCache];\n\n            while(counter < level){\n                levelTree[counter+1] = levelTree[counter].reduce((arr,item)=>{\n                    let child = Object.values(item);\n                    return arr.concat(child);\n                },[]);\n                counter++;\n            }\n\n            let valuefield = this.valuefield;\n            let rst = levelTree[counter].reduce((obj,item)=>{\n                item.reduce((obj,item)=>{\n                    obj[item[valuefield]] = item\n                    return obj;\n                },obj)\n\n                return obj\n            },{})\n\n            return Object.values(rst);\n        },\n        hasValidIds(){\n            for(let item of this.relates){\n                if(item.value === item.invalidValue){\n                    return false;\n                }\n            }\n            return true;\n        },\n        hasCachedOptions(){\n            let start = this.optionsCache;\n            let len = this.relates.length;\n            let counter = 0;\n            let relateId;\n\n            while(counter<len){\n                relateId = this.relates[counter++]['value'];\n                if(!start.hasOwnProperty(relateId)){\n                    return false;\n                }\n\n                start = start[relateId];\n            }\n            return true;\n        },\n    },\n    data(){\n        return {\n            optionsCache:{},\n        }\n    },\n    watch:{\n        relates:{\n            handler:'getOptions',\n            deep:true,\n            immediate:true\n        },\n    },\n}","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('filter_model',_vm._b({attrs:{\"candidate\":_vm.finalOptions,\"labelfield\":_vm.labelfield,\"valuefield\":_vm.valuefield},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}},'filter_model',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter_relates_model.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter_relates_model.vue?vue&type=script&lang=js\"","<template>\n    <filter_model\n        :candidate=\"finalOptions\"\n        :labelfield=\"labelfield\"\n        :valuefield=\"valuefield\"\n        v-model=\"model\"\n        v-bind=\"$attrs\"\n    ></filter_model>\n</template>\n\n<script>\nimport filter_model from \"./filter_model\"\n\nimport _field_relates_mixin from \"./_field_relates_mixin\"\nimport _props_value_mixin from \"./_props_value_mixin\"\nimport _computed_model_mixin from \"./_computed_model_mixin\"\n\nexport default{\n    name:\"filter_relates_model\",\n    inheritAttrs:true,\n    components:{\n        filter_model,\n    },\n    mixins:[\n        _field_relates_mixin,\n        _props_value_mixin,\n        _computed_model_mixin,\n    ],\n}\n</script>","import { render, staticRenderFns } from \"./filter_relates_model.vue?vue&type=template&id=507d1b84\"\nimport script from \"./filter_relates_model.vue?vue&type=script&lang=js\"\nexport * from \"./filter_relates_model.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","export default{\n    props:{\n        allvalue:{\n            default:\"\",\n        },\n        alllabel:{\n            type:String,\n            default:\"不限\",\n        },\n        candidate:{\n            type:Array,\n            default(){\n                return [];\n            }\n        },\n    },\n    computed:{\n        filter_candidate(){\n            let [...arr] = this.candidate;\n            arr.unshift({\n                [this.labelfield]:this.alllabel,\n                [this.valuefield]:this.allvalue,\n            })\n            return arr;\n        }\n    }\n}","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","export default {\n    computed:{\n        model:{\n            get(){\n                return this.value;\n            },\n            set(val){\n                this.$emit('input',val);\n            },\n        }\n    }\n}","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  return Array.isArray(arr) ? arr : (0, _from2.default)(arr);\n};","import validateOption from \"./_validate_option\"\n\nexport default Object.assign({},validateOption,{\n    methods:{\n        validateOption(){\n            if(!this.isCandidateValid){\n                return;\n            }\n\n            let allvalueSet = new Set();\n            for(let item of this.candidate){\n                allvalueSet.add(item[this.valuefield]);\n            }\n\n            // 对于单选，只有候选项不含该值的情况\n            if(!allvalueSet.has(this.value)){\n                this.handleInvalidValue(this.value,[...allvalueSet]);\n            }\n\n\n        },\n    },\n});","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-autocomplete',_vm._b({attrs:{\"value\":_vm.showValue,\"value-key\":_vm.labelfield,\"fetch-suggestions\":_vm.queryModel},on:{\"select\":_vm.handleSelect,\"input\":_vm.handleInput}},'el-autocomplete',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./field_model.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./field_model.vue?vue&type=script&lang=js\"","<template>\n    <el-autocomplete\n        :value=\"showValue\"\n        :value-key=\"labelfield\"\n        :fetch-suggestions=\"queryModel\"\n        @select=\"handleSelect\"\n        @input=\"handleInput\"\n        v-bind=\"$attrs\"\n    ></el-autocomplete>\n</template>\n\n<script>\nimport _props_label_value_mixin from \"./_props_label_value_mixin\"\nimport _props_value_mixin from \"./_props_value_mixin\"\nimport _computed_value_label_map_mixin from './_computed_value_label_map_mixin'\nimport _validate_option_mono from \"./_validate_option_mono\"\n\nexport default{\n    name:'field_model',\n    inheritAttrs:true,\n    mixins:[\n        _props_label_value_mixin,\n        _props_value_mixin,\n        _computed_value_label_map_mixin,\n        _validate_option_mono,\n    ],\n    data(){\n        return {\n            showValue:'',\n        }\n    },\n    props:{\n        candidate:{\n            type:Array,\n            required:true,\n        },\n    },\n    methods:{\n        queryModel(queryString,cb){\n            let data = queryString?this.candidate.filter((item)=>{\n                return item[this.labelfield].includes(queryString);\n            }):this.candidate;\n            cb(data)\n        },\n        handleInput(value){\n            this.showValue = value\n        },\n        handleSelect(item){\n            this.$emit('input',item[this.valuefield]);\n            this.setShowValueByValue();\n        },\n        setShowValueByValue(){\n            let value = this.value;\n            if(this.valueLabelMap.has(value)){\n                this.showValue = this.valueLabelMap.get(value)\n            }\n        },\n    },\n    watch:{\n        value:{\n            handler:\"setShowValueByValue\",\n            immediate:true,\n        },\n        candidate:{\n            handler:\"setShowValueByValue\",\n            immediate:true,\n        },\n    },\n}\n</script>","import { render, staticRenderFns } from \"./field_model.vue?vue&type=template&id=04d51a94\"\nimport script from \"./field_model.vue?vue&type=script&lang=js\"\nexport * from \"./field_model.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('field_model',_vm._b({attrs:{\"candidate\":_vm.filter_candidate,\"labelfield\":_vm.labelfield,\"valuefield\":_vm.valuefield},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}},'field_model',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter_model.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./filter_model.vue?vue&type=script&lang=js\"","<template>\n    <field_model\n        v-model=\"model\"\n        :candidate=\"filter_candidate\"\n        :labelfield=\"labelfield\"\n        :valuefield=\"valuefield\"\n        v-bind=\"$attrs\"\n    ></field_model>\n</template>\n\n<script>\nimport field_model from \"./field_model.vue\"\n\nimport _filter_all_mixin from \"./_filter_all_mixin.js\"\nimport _props_value_mixin from \"./_props_value_mixin.js\"\nimport _props_label_value_mixin from \"./_props_label_value_mixin.js\"\nimport _computed_model_mixin from \"./_computed_model_mixin.js\"\n\n\nexport default{\n    name:\"filter_model\",\n    inheritAttrs:true,\n    components:{\n        field_model,\n    },\n    mixins:[\n        _filter_all_mixin,\n        _props_value_mixin,\n        _props_label_value_mixin,\n        _computed_model_mixin,\n    ],\n    props:{\n        candidate:{\n            type:Array,\n            required:true,\n        },\n    },\n}\n</script>","import { render, staticRenderFns } from \"./filter_model.vue?vue&type=template&id=598b04f4\"\nimport script from \"./filter_model.vue?vue&type=script&lang=js\"\nexport * from \"./filter_model.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}