{"version":3,"sources":["webpack:///./src/components/common/staticOperators/create.vue?3ca2","webpack:///./src/components/common/staticOperators/create.vue?3e9e","webpack:///src/components/common/staticOperators/create.vue","webpack:///./src/components/common/staticOperators/create.vue"],"names":["staticOperators_createvue_type_script_lang_js","name","inheritAttrs","components","editor","__webpack_require__","e","then","bind","data","isShowCreatebox","fields","record","canInitDialog","props","field_list","type","Object","required","getCreateFields","Function","doCreateRequest","triggerConfig","default","dialogConfig","createBtnConfig","cancelBtnConfig","transformData","autoValidate","Boolean","watch","this","methods","showDialog","resetRecord","_this","reduce","obj","row","forEach","field","configDefault","editorComponent","call","handleClick","_this2","length","promise_default","a","resolve","reject","catch","utility","doCreate","_this3","$refs","createbox","validate","$emit","err","$message","component","componentNormalizer","_vm","_h","$createElement","_c","_self","_b","on","click","_v","_s","text","attrs","visible","update:visible","$event","ref","mode","slot","_e","__webpack_exports__"],"mappings":"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","file":"static/js/17.cc764a574449536934fb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',_vm._b({on:{\"click\":_vm.handleClick}},'el-button',_vm.triggerConfig,false),[_vm._v(\"\\n        \"+_vm._s(_vm.triggerConfig.text)+\"\\n    \")]),_vm._v(\" \"),(_vm.canInitDialog)?_c('el-dialog',_vm._b({attrs:{\"visible\":_vm.isShowCreatebox},on:{\"update:visible\":function($event){_vm.isShowCreatebox=$event}}},'el-dialog',_vm.dialogConfig,false),[_c('editor',{ref:\"createbox\",attrs:{\"fields\":_vm.fields,\"field_list\":_vm.field_list,\"record\":_vm.record,\"autoValidate\":_vm.autoValidate,\"mode\":\"create\"}}),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',_vm._b({on:{\"click\":function($event){_vm.isShowCreatebox=false}}},'el-button',_vm.cancelBtnConfig,false),[_vm._v(\"\\n                \"+_vm._s(_vm.cancelBtnConfig.text)+\"\\n            \")]),_vm._v(\" \"),_c('el-button',_vm._b({on:{\"click\":_vm.doCreate}},'el-button',_vm.createBtnConfig,false),[_vm._v(\"\\n                \"+_vm._s(_vm.createBtnConfig.text)+\"\\n            \")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js\"","<template>\n    <div>\n        <el-button\n            @click=\"handleClick\"\n            v-bind=\"triggerConfig\"\n        >\n            {{triggerConfig.text}}\n        </el-button>\n        <el-dialog\n            v-if=\"canInitDialog\"\n            :visible.sync=\"isShowCreatebox\"\n            v-bind=\"dialogConfig\"\n        >\n            <editor\n                :fields=\"fields\"\n                :field_list=\"field_list\"\n                :record=\"record\"\n                :autoValidate=\"autoValidate\"\n                ref=\"createbox\"\n                mode=\"create\"\n            ></editor>\n            <div slot=\"footer\">\n                <el-button\n                    @click=\"isShowCreatebox=false\"\n                    v-bind=\"cancelBtnConfig\"\n                >\n                    {{cancelBtnConfig.text}}\n                </el-button>\n                <el-button \n                    @click=\"doCreate\" \n                    v-bind=\"createBtnConfig\"\n                >\n                    {{createBtnConfig.text}}\n                </el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\nimport {logError} from \"@/widget/utility.js\"\nexport default{\n    name:\"create\",\n    inheritAttrs:true,\n    components:{\n        editor:()=>import(\"@/components/common/editor/editor\"),\n    },\n    data (){\n        return {\n            isShowCreatebox:false,\n            fields:[],\n            record:{},\n            canInitDialog:false,\n        }\n    },\n    props:{\n        field_list:{\n            type:Object,\n            required:true,\n        },\n        getCreateFields:{\n            type:Function,\n            required:true,\n        },\n        doCreateRequest:{\n            type:Function,\n            required:true,\n        },\n        triggerConfig:{\n            type:Object,\n            default(){\n                return {}\n            },\n        },\n        dialogConfig:{\n            type:Object,\n            default(){\n                return {}\n            }\n        },\n        createBtnConfig:{\n            type:Object,\n            default(){\n                return {};\n            },\n        },\n        cancelBtnConfig:{\n            type:Object,\n            default(){\n                return {};\n            }\n        },\n        transformData:{\n            type:Function,\n            default(data){\n                return data;\n            }\n        },\n        autoValidate:{\n            type:Boolean,\n            default:false,\n        },\n\n    },\n    watch:{\n        field_list(){\n            this.fields = [];\n        },\n    },\n    methods:{\n        showDialog(){\n            this.isShowCreatebox = true;\n        },\n        resetRecord(){\n            this.record = this.fields.reduce((obj,row)=>{\n                row.forEach((field)=>{\n                    let configDefault = this.field_list[field].editorComponent.default;\n                    obj[field] = typeof configDefault === 'function'?configDefault.call(this,field):configDefault;\n                })\n                return obj;\n            },{});\n        },\n        handleClick(){\n            if(this.fields.length === 0){\n                new Promise((resolve,reject)=>{\n                    this.getCreateFields(resolve)\n                }).then((fields)=>{\n                    this.fields = fields;\n                    this.resetRecord();\n                    this.canInitDialog = true;\n                    this.showDialog();\n                }).catch(logError)\n\n            }else{\n                this.resetRecord();\n                this.showDialog()\n            }    \n        },\n        doCreate(){\n            this.$refs.createbox.validate().then((data)=>{\n                new Promise((resolve,reject)=>{\n                    this.doCreateRequest(resolve,this.transformData(data))\n                }).then(()=>{\n                    this.isShowCreatebox = false;\n                    this.$emit('update');\n                }).catch(logError)\n\n            }).catch((err)=>{\n                this.$message(err);\n            })\n\n        },\n    }\n}\n</script>","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=461cf99a\"\nimport script from \"./create.vue?vue&type=script&lang=js\"\nexport * from \"./create.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}